entities:
  character_naming:
    properties:
      - firstname
      - lastname

  character_stats:
    properties:
      - genre
      - heigth
      - current_health
      - max_health
    constraints:
      properties:
        character_stats.current_health:
          - ltoe.self(character_stats.max_health)

  owned_gear:
    properties:
      - gear
      - stock
      - equiped

  gear:
    properties:
      - name
      - description
    states:
      __default:
        methods:
          POST:
            properties:
              - name
              - description
            by:
              users:
                - ROLE_USER
      posted:
        methods:
          GET:
            by: all
          PATCH:
            properties:
              - name
              - description
            by:
              users:
                - owner
              roles:
                - ROLE_ADMIN
          DELETE:
            by:
              roles:
                - ROLE_ADMIN

  character:
    properties:
      - character_naming
      - character_stats
      - owned_gear
    states:
      __default:
        methods:
          POST:
            properties: []
            by:
              roles:
                - ROLE_USER
      posted:
        methods:
          GET:
            by:
              users:
                - owner
              roles:
                - ROLE_ADMIN
          POST:
            properties:
              - character_naming
              - character_stats
              - owned_gear
            by:
              users:
                - owner
              roles:
                - ROLE_ADMIN
          PATCH:
            properties:
              - character_naming
              - character_stats
              - owned_gear
            by:
              users:
                - owner
              roles:
                - ROLE_ADMIN
          DELETE:
            by:
              users:
                - owner
      approved:
        constraints:
          manual:
            by:
              roles:
                - ROLE_ADMIN
            coming_from_states:
              - posted
        methods:
          GET:
            by: all